'use strict';

module.exports = {
  async up(queryInterface, Sequelize) {
    const getRandomAmount = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
    await queryInterface.bulkInsert('Transactions', [
      {
        id: '1',
        pocket_id: '1',
        initiator_user_id: '1',
        type: 'Topup',
        amount: 500000,
        purpose: 'Tabungan awal untuk liburan',
        status: 'completed',
        description: 'Transfer dari rekening utama',
        is_business_expense: false,
        createdAt: new Date('2024-01-15'),
        updatedAt: new Date('2024-01-15'),
      },
      {
        id: '2',
        pocket_id: '1',
        initiator_user_id: '1',
        type: 'Topup',
        amount: 1000000,
        purpose: 'Bonus gaji januari',
        status: 'completed',
        description: 'Tambahan tabungan liburan',
        is_business_expense: false,
        createdAt: new Date('2024-02-01'),
        updatedAt: new Date('2024-02-01')
      },
      {
        id: '3',
        pocket_id: '2',
        initiator_user_id: '2',
        type: 'Contribution',
        amount: 3000000,
        purpose: 'Kontribusi awal laptop gaming',
        status: 'completed',
        description: 'Setoran pertama untuk laptop',
        is_business_expense: false,
        createdAt: new Date('2024-01-10'),
        updatedAt: new Date('2024-01-10')
      },
      {
        id: '4',
        pocket_id: '2',
        initiator_user_id: '1',
        type: 'Contribution',
        amount: 2500000,
        purpose: 'Ikut patungan laptop',
        status: 'pending',
        description: 'Menunggu persetujuan grup',
        is_business_expense: false,
        createdAt: new Date('2024-02-15'),
        updatedAt: new Date('2024-02-15')
      },
      {
        id: '5',
        pocket_id: '2',
        initiator_user_id: '3',
        type: 'Contribution',
        amount: 3000000,
        purpose: 'Kontribusi laptop gaming',
        status: 'completed',
        description: 'Setoran untuk laptop gaming',
        is_business_expense: false,
        createdAt: new Date('2024-02-20'),
        updatedAt: new Date('2024-02-20')
      },
      {
        id: '6',
        pocket_id: '3',
        initiator_user_id: '3',
        type: 'Topup',
        amount: 2000000,
        purpose: 'Emergency fund buildup',
        status: 'completed',
        description: 'Pembentukan dana darurat',
        is_business_expense: false,
        createdAt: new Date('2024-01-05'),
        updatedAt: new Date('2024-01-05')
      },
      {
        id: '7',
        pocket_id: '3',
        initiator_user_id: '3',
        type: 'Topup',
        amount: 1200000,
        purpose: 'Tambahan emergency fund',
        status: 'completed',
        description: 'Penambahan rutin bulanan',
        is_business_expense: false,
        createdAt: new Date('2024-02-05'),
        updatedAt: new Date('2024-02-05')
      },
      {
        id: '8',
        pocket_id: '4',
        initiator_user_id: '4',
        type: 'Contribution',
        amount: 400000,
        purpose: 'Arisan bulan Januari',
        status: 'completed',
        description: 'Setoran arisan keluarga',
        is_business_expense: false,
        createdAt: new Date('2024-01-01'),
        updatedAt: new Date('2024-01-01')
      },
      {
        id: '9',
        pocket_id: '4',
        initiator_user_id: '2',
        type: 'Contribution',
        amount: 400000,
        purpose: 'Arisan bulan Januari',
        status: 'completed',
        description: 'Ikut arisan keluarga',
        is_business_expense: false,
        createdAt: new Date('2024-01-01'),
        updatedAt: new Date('2024-01-01')
      },
      {
        id: '10',
        pocket_id: '4',
        initiator_user_id: '5',
        type: 'Contribution',
        amount: 400000,
        purpose: 'Arisan bulan Januari',
        status: 'completed',
        description: 'Setoran arisan keluarga',
        is_business_expense: false,
        createdAt: new Date('2024-01-01'),
        updatedAt: new Date('2024-01-01')
      },
      {
        id: '11',
        pocket_id: '5',
        initiator_user_id: '5',
        type: 'Contribution',
        amount: 10000000,
        purpose: 'Modal awal investasi',
        status: 'completed',
        description: 'Investasi saham blue chip',
        is_business_expense: false,
        createdAt: new Date('2024-01-20'),
        updatedAt: new Date('2024-01-20')
      },
      {
        id: '12',
        pocket_id: '5',
        initiator_user_id: '5',
        type: 'Topup',
        amount: 2500000,
        purpose: 'DCA bulanan saham',
        status: 'completed',
        description: 'Dollar cost averaging',
        is_business_expense: false,
        createdAt: new Date('2024-02-20'),
        updatedAt: new Date('2024-02-20')
      },
      {
        id: '13',
        pocket_id: '2',
        initiator_user_id: '2',
        type: 'Withdrawal',
        amount: 5000000,
        purpose: 'Pembelian laptop gaming',
        status: 'pending',
        description: 'Withdrawal untuk beli laptop',
        is_business_expense: false,
        createdAt: new Date('2024-03-01'),
        updatedAt: new Date('2024-03-01')
      },
      {
        id: '14',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(200000, 500000),
        purpose: "Patungan bulanan Januari",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-01-05T10:00:00"),
        updatedAt: new Date("2025-01-05T10:00:00"),
      },
      {
        id: '15',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Expense",
        amount: getRandomAmount(50000, 150000),
        purpose: "Beli Kopi Kenangan",
        status: "completed",
        description: "Jajan sore bareng tim",
        is_business_expense: false,
        createdAt: new Date("2025-01-15T16:30:00"),
        updatedAt: new Date("2025-01-15T16:30:00"),
      },
      {
        id: '16',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Payment",
        amount: getRandomAmount(200000, 300000),
        purpose: "Bayar langganan Adobe",
        status: "completed",
        description: "Tagihan bulanan software",
        is_business_expense: true,
        createdAt: new Date("2025-01-15T19:00:00"),
        updatedAt: new Date("2025-01-15T19:00:00"),
      },

      // --- FEBRUARY 2025 ---
      {
        id: '17',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(200000, 500000),
        purpose: "Patungan bulanan Februari",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-02-05T11:00:00"),
        updatedAt: new Date("2025-02-05T11:00:00"),
      },
      {
        id: '18',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Income",
        amount: 1000000,
        purpose: "Reimbursement Proyek A",
        status: "completed",
        description: "Penggantian dana dari klien",
        is_business_expense: false,
        createdAt: new Date("2025-02-20T14:00:00"),
        updatedAt: new Date("2025-02-20T14:00:00"),
      },

      // --- MARCH 2025 ---
      {
        id: '19',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(200000, 500000),
        purpose: "Patungan bulanan Maret",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-03-05T09:30:00"),
        updatedAt: new Date("2025-03-05T09:30:00"),
      },
      {
        id: '20',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Withdrawal",
        amount: 500000,
        purpose: "Tarik tunai keperluan tim",
        status: "pending",
        description: "Menunggu approval",
        is_business_expense: false,
        createdAt: new Date("2025-03-10T13:00:00"),
        updatedAt: new Date("2025-03-10T13:00:00"),
      },
      {
        id: '21',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Expense",
        amount: 250000,
        purpose: "Makan siang tim",
        status: "completed",
        description: "Makan di Pagi Sore",
        is_business_expense: true,
        createdAt: new Date("2025-03-10T12:30:00"),
        updatedAt: new Date("2025-03-10T12:30:00"),
      },

      // --- APRIL 2025 ---
      {
        id: '22',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(300000, 600000),
        purpose: "Patungan bulanan April",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-04-05T10:15:00"),
        updatedAt: new Date("2025-04-05T10:15:00"),
      },
      {
        id: '23',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Topup",
        amount: 750000,
        purpose: "Top up dana proyek",
        status: "completed",
        description: "Dana tambahan untuk Proyek B",
        is_business_expense: false,
        createdAt: new Date("2025-04-22T11:00:00"),
        updatedAt: new Date("2025-04-22T11:00:00"),
      },

      // --- MAY 2025 ---
      {
        id: '24',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "AutoRecurring",
        amount: 50000,
        purpose: "Biaya admin bulanan",
        status: "completed",
        description: "Potongan otomatis",
        is_business_expense: true,
        createdAt: new Date("2025-05-01T08:00:00"),
        updatedAt: new Date("2025-05-01T08:00:00"),
      },
      {
        id: '25',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(250000, 550000),
        purpose: "Patungan bulanan Mei",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-05-05T09:00:00"),
        updatedAt: new Date("2025-05-05T09:00:00"),
      },
      {
        id: '26',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Transfer",
        amount: 300000,
        purpose: "Transfer ke Pocket lain",
        status: "completed",
        description: "Pindah dana ke pocket marketing",
        is_business_expense: false,
        createdAt: new Date("2025-05-25T18:00:00"),
        updatedAt: new Date("2025-05-25T18:00:00"),
      },

      // --- JUNE 2025 ---
      {
        id: '27',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Contribution",
        amount: getRandomAmount(200000, 500000),
        purpose: "Patungan bulanan Juni",
        status: "completed",
        description: "Setoran rutin awal bulan",
        is_business_expense: false,
        createdAt: new Date("2025-06-05T10:00:00"),
        updatedAt: new Date("2025-06-05T10:00:00"),
      },
      {
        id: '28',
        pocket_id: "2",
        initiator_user_id: "2",
        type: "Payment",
        amount: 150000,
        purpose: "Bayar tagihan internet",
        status: "completed",
        description: "Tagihan IndiHome",
        is_business_expense: true,
        createdAt: new Date("2025-06-19T20:00:00"),
        updatedAt: new Date("2025-06-19T20:00:00"),
      },
    ], {});

    await queryInterface.sequelize.query(`
      SELECT setval('public."Transactions_id_seq"', COALESCE((SELECT MAX(id) FROM "Transactions"), 0) + 1, false);
    `);
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('Transactions', null, {});
  }
};